# æ­£åˆ™å­¦ä¹ 

æ­£åˆ™çš„ç›¸å…³æ–¹æ³•ï¼š
- å­—ç¬¦ä¸²â€”â€” searchã€matchã€replaceã€splitï¼›
- æ­£åˆ™â€”â€” execã€testã€‚

## replace

ç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œå¯ä»¥åˆ©ç”¨ä¸€äº›æ¨¡ç‰ˆå˜é‡æ¥æ›¿æ¢ã€‚

| å˜é‡å | è§£é‡Š |
|:--|:--|
| $$ | 	æ’å…¥ä¸€ä¸ª "$"ã€‚ |
| $& | æ’å…¥åŒ¹é…çš„å­ä¸²ã€‚ |
| $` | æ’å…¥å½“å‰åŒ¹é…çš„å­ä¸²å·¦è¾¹çš„å†…å®¹ã€‚ |
| $' | æ’å…¥å½“å‰åŒ¹é…çš„å­ä¸²å³è¾¹çš„å†…å®¹ã€‚ |
| $n | æ’å…¥ç¬¬ n ä¸ªåˆ†ç»„ã€‚ |
| $\<Name\> | æ’å…¥æœ‰åç§°çš„åˆ†ç»„ã€‚ |

äº¤æ¢åˆ†ç»„çš„å•è¯ï¼Œè¿™é‡Œç”¨åˆ°äº†ä¿®é¥°ç¬¦`g`ï¼Œä»£è¡¨ä¼šäº¤æ¢æ‰€æœ‰çš„åŒ¹é…ï¼š

```javascript
var re = /(\w+)\s(\w+)/g;
var str = "John Smith David Martinez";
str.replace(re, "$2, $1"); // äº¤æ¢åŒ¹é…åˆ°çš„ John Smithï¼Œå†äº¤æ¢åŒ¹é…åˆ°çš„ David Martinez
// 'Smith, John Martinez, David'
```

ç›¸å…³é“¾æ¥ï¼š
- [MDN-String.prototype.replace()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace)

## è¯è¾¹ç•Œå’Œé”šç‚¹

å…³äºè¯è¾¹ç•Œ`\b`ï¼šè¯è¾¹ç•ŒæŒ‡çš„æ˜¯`\w`å’Œ`\W`ä¹‹é—´çš„ä½ç½®ï¼Œ`\w`å’Œ`$`ä¹‹é—´çš„ä½ç½®ï¼Œ`\w`å’Œ`^`ä¹‹é—´çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´`\b`æ‰¾çš„æ˜¯å­—æ¯çš„æ—è¾¹ä¸æ˜¯å­—æ¯çš„ä½ç½®ã€‚

ä¸‹é¢æ˜¯è¯è¾¹ç•Œçš„ä¾‹å­ï¼Œå¯ä»¥è§‚å¯Ÿè¯è¾¹ç•Œè¢«æ›¿æ¢æˆâ€œğŸ¤”â€çš„ä½ç½®ï¼š

```javascript
"So what do you wanna do, what's your point-of-view.".replace(/\b/g, () => "ğŸ¤”");
// "ğŸ¤”SoğŸ¤” ğŸ¤”whatğŸ¤” ğŸ¤”doğŸ¤” ğŸ¤”youğŸ¤” ğŸ¤”wannağŸ¤” ğŸ¤”doğŸ¤”, ğŸ¤”whatğŸ¤”'ğŸ¤”sğŸ¤” ğŸ¤”yourğŸ¤” ğŸ¤”pointğŸ¤”-ğŸ¤”ofğŸ¤”-ğŸ¤”viewğŸ¤”."
"Ohï¼Œä½ å¥½Lucyï¼Œæˆ‘æ˜¯Davidã€‚".replace(/\b/g, () => "ğŸ¤”");
// 'ğŸ¤”OhğŸ¤”ï¼Œä½ å¥½ğŸ¤”LucyğŸ¤”ï¼Œæˆ‘æ˜¯ğŸ¤”DavidğŸ¤”ã€‚'
```


## RegExp.lastIndex

> lastIndex æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªå¯è¯»å¯å†™çš„æ•´å‹å±æ€§ï¼Œç”¨æ¥æŒ‡å®šä¸‹ä¸€æ¬¡åŒ¹é…çš„èµ·å§‹ç´¢å¼•ã€‚ â€”â€” MDN

`regexp.test`æˆ–`regexp.exec`æ¯æ‰§è¡Œä¸€æ¬¡ï¼Œéƒ½ä¼šé‡æ–°èµ‹å€¼ lastIndexï¼Œè¿™ä¼šå¯¼è‡´æ¯æ¬¡æ‰§è¡Œ`test`æˆ–`exec`è¿›è¡Œæ ¡éªŒçš„æ—¶å€™ï¼Œå¾—åˆ°çš„ç»“æœä¸ä¸€è‡´ã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ¡ä»¶æ˜¯ï¼Œæ­£åˆ™è¡¨è¾¾å¼éœ€è¦åŒ…å«`y`æˆ–è€…`g`ä¿®é¥°ç¬¦ã€‚

ç›¸å…³é“¾æ¥ï¼š
- [ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“è¢«å¿½ç•¥çš„æ­£åˆ™é—®é¢˜](https://www.lcs.show/blog/common/an-overlooked-regular-knowledge)ï¼›
- [MDN-RegExp.lastIndex](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastIndex)â€”â€” MDN çš„ RegExp.lastIndex æ–‡æ¡£ã€‚

## ä¿®é¥°ç¬¦

ä¸‹é¢æ˜¯ç²˜æ€§ä¿®é¥°ç¬¦`y`çš„ä¾‹å­ï¼š

```javascript
var str = "So, get away.";
var reg = /\w+/y;
reg.lastIndex; // 0
reg.exec(str); // ['So', index: 0, input: 'So, get away.', groups: undefined]
reg.lastIndex; // 2
reg.exec(str); // null
reg.lastIndex; // 0
```

å¸¦`y`çš„æ­£åˆ™ï¼Œåœ¨å½¢å¼ä¸Šå¾ˆåƒæ¯æ‰§è¡Œä¸€æ¬¡å°±æŠŠå·²ç»åŒ¹é…çš„éƒ¨åˆ†æˆªå»ï¼Œå¹¶ä¸”ç»™æ­£åˆ™æ·»åŠ é”šç‚¹`^`ã€‚ä½“ç°å‡ºçš„æ•ˆæœå°±åƒæ˜¯è¢« lastIndex ç²˜ä½äº†ã€‚

ç›¸å…³é“¾æ¥ï¼š
- [ç²˜æ€§ä¿®é¥°ç¬¦ "y"ï¼Œåœ¨ä½ç½®å¤„æœç´¢](https://zh.javascript.info/regexp-sticky)ã€‚

## åŠ é‡

url å‚æ•°è½¬å¯¹è±¡

m å¤šè¡ŒåŒ¹é…

éè´ªå©ªåŒ¹é…ï¼Œ`?`ï¼Œä¾‹å¦‚`/.+?\s/.exec("Your time is limited.")`åŒ¹é…â€œYour â€

## ç»ƒä¹ 

24 å°æ—¶åˆ¶ï¼š

```javascript
var reg1 = /[0-1]\d|2[0-3]/; // æ–¹æ³• 1
reg1.test('9'); // false
var reg2 = /[0-1][0-9]|2[0-3]/; // æ–¹æ³• 2
```

åƒåˆ†ä½ï¼š

```javascript
var reg = /(?!^)(?=(\d{3})+$)/g; // (?!) è¡¨ç¤ºå¦å®šå‰ç»æ–­è¨€ï¼Œ(?=)è¡¨ç¤ºå‰ç»æ–­è¨€
"123456789".replace(reg, ',')
// 123,456,789
```


*URL query å‚æ•°è·å–ï¼š*

```
function query(name)
{
	const search = location.search.substr(1) // è·³è¿‡å¤´éƒ¨ç¬¦å·â€œ?â€
	const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`, 'i')
	const res = search.match(reg)
	if (res === null) { return null }
	return res[2] // res æ˜¯ç±»æ•°ç»„ï¼Œæœ‰å¯æšä¸¾å±æ€§ groups, index, input ä»¥åŠæ•°å­—ä¸‹æ ‡ï¼ŒæŸä¸ªæ•°å­—ä¸‹æ ‡ i çš„å€¼æ˜¯ç¬¬ i å¯¹æ‹¬å·åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œæ•°å­—ä¸‹æ ‡ 0 æ­£åˆ™åŒ¹é…çš„å­—ç¬¦ä¸²
}
```

*åˆ é™¤å¤´å°¾ç©ºæ ¼ï¼š*

```javascript
function zTrim(z)
{ return z.replace(/^\s+|\s+$/gm, '') } // å¤šè¡Œå…¨å±€åŒ¹é… gm
```

*è¡¥å…¨éè‡ªé—­åˆæ ‡ç­¾ï¼š*

```javascript
const tags = /^(area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i; // è¿™äº›æ˜¯è‡ªé—­åˆæ ‡ç­¾
function convert(html)
{
  return html.replace(/(<(\w+)[^>]*?)\/>/g,
	  (all, front, tag) => (tags.test(tag) ? all : front + "></" + tag + ">")
  ); // è¿™é‡Œçš„â€œ*?â€ï¼Œè¡¨ç¤ºé‡åˆ°â€œ>â€åŒ¹é…å¤±è´¥ï¼Œé‡åˆ°å…¶å®ƒåˆ™å¿½ç•¥
}
```

*ä¸­çº¿è½¬é©¼å³°ï¼š*

```javascript
function style(element, name, value)
{
  name = name.replace(/-([a-z])/ig,
	  (all, letter) => (letter.toUpperCase())
  );
  if (typeof value !== 'undefined') {
    element.style[name] = value;
  }
  return element.style[name];
}
```

URL è½¬å¯¹è±¡ï¼ˆå¯¹è±¡è½¬ URLï¼Œå‹ç¼© URLï¼‰

- æ£€æŸ¥æ­£åˆ™æ­£ç¡®æ€§ï¼›
- é»˜è®¤å¯¹è±¡ï¼›
- é‡å¤å‚æ•°çš„æ•°ç»„å¯¹è±¡ã€‚

## åŒ¹é… URL

- æ£€æŸ¥åˆæ³•æ€§ï¼›
- åˆå¹¶å‚æ•°ï¼›
- åŒ¹é…å‚æ•°ã€‚

æ£€æŸ¥åˆæ³•æ€§ï¼š

```javascript
var reg = 
```

URL çš„å„ç§å½¢å¼ï¼š

```javascript
var url = "http://user:password@www.a.com:90/dir/file1.htm" // ç”¨ HTTP åè®®è®¿é—® Web æœåŠ¡å™¨
var url = ftp://user:password@ftp.a.com:21/dir/file1.html; // ç”¨ FTP åè®®ä¸‹è½½å’Œä¸Šä¼ æ–‡ä»¶
var url = file://localhost/C:/path/file1.zip; // è¯»å–å®¢æˆ·ç«¯è®¡ç®—æœºæœ¬åœ°æ–‡ä»¶
var url = mailto:tone@a.com; // å‘é€ç”µå­é‚®ä»¶
var url = news:comp.protocols.tcp-ip; // é˜…è¯»æ–°é—»ç»„çš„æ–‡ç« 
```

ç›¸å…³é“¾æ¥ï¼š
- [In search of the perfect URL validation regex](https://mathiasbynens.be/demo/url-regex)ï¼šç”¨æ¡ˆä¾‹è¡¨æ ¼è¡¡é‡åŒ¹é… URL çš„æ­£åˆ™çš„å‡†ç¡®åº¦ï¼Œè¿˜åŒ…æ‹¬äº†æ­£åˆ™çš„é•¿åº¦ï¼›
- [URLSearchParams](https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams)

## å¼•ç”¨

èµ„æ–™ï¼š
- [iHateRegex](https://ihateregex.io/)â€”â€”ä¸€ä¸ªå¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼ç½‘ç«™ï¼ˆâ€œNow you have two problems.â€ï¼‰ï¼›
- [JSæ­£åˆ™è¡¨è¾¾å¼å®Œæ•´æ•™ç¨‹ï¼ˆç•¥é•¿ï¼‰](https://juejin.cn/post/6844903487155732494)â€”â€”æ­£åˆ™è¿·ä½ ä¹¦ï¼›
- [oschina æ­£åˆ™è¡¨æ ¼](https://tool.oschina.net/uploads/apidocs/jquery/regexp.html)ï¼›
- [regex101: build, test, and debug regex](https://regex101.com/)â€”â€”æ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒç½‘ç«™ï¼›
- [JAVASCRIPT.INFO æ­£åˆ™è¡¨è¾¾å¼](https://zh.javascript.info/regular-expressions)â€”â€” JAVASCRIPT.INFO çš„æ­£åˆ™è¡¨è¾¾å¼æ•™ç¨‹ã€‚


ç›¸å…³é“¾æ¥ï¼š

- [javascriptæ­£åˆ™æ·±å…¥ä»¥åŠ10ä¸ªéå¸¸æœ‰æ„æ€çš„æ­£åˆ™å®æˆ˜](https://zhuanlan.zhihu.com/p/139711396)
- [å®ç°ä¸€ä¸ªç®€å•çš„æ¨¡æ¿å¼•æ“](http://www.alloyteam.com/2016/10/implement-a-simple-template-engine/)
- [ç½‘ç«™ regexper](https://regexper.com/)â€”â€”ä»¥å›¾å½¢å½¢å¼å±•ç¤ºæ­£åˆ™ï¼›
- [è€å§šä¸¨æ´è§ç”Ÿäº§è€…](https://www.zhihu.com/people/qdlaoyao/posts)â€”â€”å¸¸å‘å¸ƒæ­£åˆ™ç›¸å…³æ–‡ç« çš„çŸ¥ä¹è´¦æˆ·ï¼›
- [æ­£åˆ™è¡¨è¾¾å¼æ¡ˆä¾‹åˆ†æ ï¼ˆä¸€ï¼‰](https://juejin.cn/post/6844903487059263502)ï¼›
- [ğŸ©æƒ³è¦ç™½å«–æ­£åˆ™æ˜¯å§ï¼Ÿè¿™ä¸€æ¬¡ç»™ä½ ä¸ªå¤Ÿï¼](https://juejin.cn/post/7119242343798013959)â€”â€”æ¡ˆä¾‹åˆ—è¡¨ï¼›
- [ğŸ¦•æ­£åˆ™å¤§å…¨](https://any86.github.io/any-rule/)â€”â€”æ¡ˆä¾‹åˆ—è¡¨ï¼›
- [æ—¥å¸¸å¼€å‘æå‡æ•ˆç‡ä¹‹å¸¸ç”¨æ­£åˆ™å®ä¾‹](https://juejin.cn/post/6914843961408356360)â€”â€”æ¡ˆä¾‹åˆ—è¡¨ã€‚