# 键盘无障碍

原文：*https://webaim.org/techniques/keyboard/*

原文日期：Sep 26, 2022

原文作者：[WebAIM](https://webaim.org/)

翻译日期：04/23/23 15:56:44 Sun CST

## 前言

> 重要：确保所有的内容都能够单独使用键盘访问。

键盘无障碍是网络无障碍里最重要的部分之一。很多有肢体障碍的用户依赖键盘。一些人群的身体会发生颤抖，没有很好的肌肉控制能力。其它一些人很少使用或者不使用双手，又或者失去了双手。除了常规键盘，有些用户会使用改良过的键盘，或者其它模仿键盘功能的硬件设备。视障用户通常也使用键盘来导航。没有肢体残疾的用户也可能会因为偏好和效率而使用键盘进行导航。

## 潜在问题

对于依赖键盘的用户，网页里可能有很多地方会给他们带来麻烦和困难。下面列举一些常见问题。

### 焦点指示器

键盘用户通常在网页会用 `Tab` 来访问交互元素——链接、按钮、输入文本框等等。当某个元素被 tab，它会出现键盘“焦点”，而且可以通过键盘来激活或者进一步操作。必须为视力正常的用户提供**视觉**指示器表示当前的元素已被聚焦。网页浏览器已经默认提供焦点指示器，虽然它们的外观在不同浏览器有一定差异，但基本上是在被聚焦元素的周围展示一个边框或者高亮（称为轮廓）。这些轮廓可以通过 CSS 的 `outline:0` 或者 `outline:none` 来隐藏。

> 重要：[避免设置 `outline:0` 或者 `outline:none`](https://webaim.org/blog/plague-of-outline-0/)，或者其它会移除、减弱焦点指示器的样式。

除了使用默认轮廓样式，您还可以用 CSS 加强指示器的视觉展示、提高键盘友好度，您可以为链接或是其它交互控件添加醒目的焦点指示器对比度，添加背景颜色或者其它聚焦样式。轮廓的样式可以匹配您的站点设计风格，在 `Tab` 时同样应该很容易被察觉。

### 导航顺序

当用户在页面导航的时候，元素聚焦的顺序很重要。默认的键盘导航顺序必须是符合逻辑和直觉的。这通常意味着页面的视觉顺序遵守从左到右、从上到下。对于大多数页面，这意味着头部优先，接着是主体，最后是尾部。导航顺序（或者屏幕阅读器顺序）取决于页面源码。最好有这样的结果：
- Structure your underlying source code so that the reading/navigation order is correct.
- Then, if necessary, use CSS to control the visual presentation of the elements on your page.
- 不使用 `tabindex` 的大于 1 的值，不用它来改变默认的键盘导航顺序。

### 不能被键盘聚焦的元素

链接、按钮和表单控件都是原生键盘无障碍的，所以任何时候都可以交互。不能够用鼠标和触摸屏交互的元素也不应该被键盘用户交互（例如 `tabindex`）。如果键盘导航到了非交互元素，会产生混乱。

> 注意：`<a>` 元素只有在有非空的 href 属性的时候才是键盘可访问和屏幕阅读器可访问的。`<a>` 或者 `<a href="">` 不会被当作链接。

### 不可访问的自定义组件

原生 HTML 元素不够用的时候就需要自定义组件了。所有的自定义组件必须仍然是键盘访问无障碍的。您可能要用 `tabindex=0` 来让元素可以被键盘聚焦。您可能还需要 [ARIA](https://webaim.org/techniques/aria/) 来保证控件对于屏幕阅读器用户有正确的展示。[ARIA Authoring Practices](https://www.w3.org/TR/wai-aria-practices-1.1/) 包括了很多类型的组件所需的键盘交互和 ARIA 编码。完成以下几个条件来获得高可访问的组件：
- 交互是直观和可预测的；
- JavaScript 监听器可以同时为键盘和鼠标工作；
- 交互使用“standardized keystrokes”。

### 冗长的导航过程

无视力障碍的用户可以用鼠标直接点击目标。键盘用户则只能通过 `Tab` 或其它导航按键。对于有运动障碍的用户，冗长的导航过程可能是很吃力的。

长列表或者链接，或是其它可聚焦元素，可能给键盘用户带来负担。下面的最佳实践有利于高效键盘导航：
- 页面提供“[跳转至主体](https://webaim.org/techniques/skipnav/)”链接；
- 使用[合适的标题结构](https://webaim.org/techniques/semanticstructure/#headings)；
- 提供[区域性 ARIA 标签](https://webaim.org/techniques/semanticstructure/#regions)（`<main>`、`<nav>` 之类）。

## 键盘测试

用键盘测试是任何可访问性评估的重要组成。

下表包含了许多常见常见的交互、标准按键以及其它需要考虑的事情。

| 交互 | 键 | 备注 |
|:--|:--|:--|
| 导航到交互元素 | 1. `Tab` 前进导航；2. `Shift` + `Tab` 后退导航 | 1. 必须要有焦点指示器；2. 导航顺序要有逻辑和能预测 |
| 链接 | `Enter` 激活链接 |  |
| 按钮 | `Enter` 或者 `Spacebar` 激活按钮 | 确保带有 `role="button"` 的元素有一样的按键反馈 |
| 复选框 | `Spacebar` 选择/取消一个复选框 | 用户通常可以选择零、一或更多个一组复选框里的单个选项 |
| 单选按钮 | 1. `Spacebar` 选择聚焦选项；2. `↑`/`↓` 或 `←`/`→` 在选项之间导航；3. `Tab` 离开一组单选按钮 | 用户在一组单选按钮中只能选择一项 |
| 选择（下拉）菜单 | 1. `↑`/`↓` 在选项之间导航；2. `Spacebar` 展开；3. `Enter`/`Esc` 选择一项并收起菜单 | 你还能通过输入内容进行过滤或者跳至某个选项 |
| 自动补全 | 1. 输入以开始过滤；2. `↑`/`↓` 导航选项；3. `Enter` 选择一个选项 |  |
| 对话框 | `Esc` 关闭 | 1. 模态对话框应该维护键盘焦点；2. 非模态对话框应该在失去焦点的时候自动关闭；3. 当对话框关闭，焦点应该回到打开对话框的元素。 |
| 滑块 | 1. `↑`/`↓` 或 `←`/`→` 增大或减小滑块值；2. `Home`/`End` 滑块的起点和终点 | 对于双头滑块（设置范围），`Tab`/`Shift` + `Tab` 应该可以触发两端；2. 一些滑块可以通过 `PageUp`/`PageDown` 来大跨步（例如变化 10% 按一次） |
| 菜单条 | 1. `↑`/`↓` 前/后一个菜单选项；2. `Enter` 展开菜单（可选）并且选中选项；3. `←`/`→` 展开/收起子菜单 | 菜单条会动态改变内容。Links that utilize `Tab`/`Enter` are NOT menu bars. |
| Tab 面板 | 1. `Tab` 一次进入 tab 面板，一次退出 tab 面板；2. `↑`/`↓` 或 `←`/`→` 选择并激活前/后一个 tab | 这是为会动态改变 tab 面板内容的 tabs 设计的。如果菜单看起来像一组 tab，但是实际是一组链接，那 `Tab` 和 `Enter` 更合适 |
| 树形菜单 | 1. `↑`/`↓` 导航前后项；2. `←`/`→` 展开/收起子菜单，移动至上/下一级 |  |
| 滚动 | 1. `↑`/`↓` 纵向滚动；2. `←`/`→` 横向滚动；3. `Spacebar`/`Shift` + `Spacebar` 滚动一个页面高度 | 默认空格滚动，这只是在没有可交互元素被聚焦的时候。应该减少页面的横向滚动。 |

> 注意：[ARIA authoring practices document](https://www.w3.org/TR/wai-aria-practices-1.1/) 提供了更多关于常见操作的信息。确保测试移动设备上的可访问性——残障用户通常会在手机和平板上外接键盘。








